<div class="h-screen">
  <div class="grid grid-nogutter h-full overflow-hidden">
    <div
      [class]="selectedUser() && isSmScreen() ? 'hidden md:flex' : ''"
      class="col-12 md:col-3 h-full"
    >
      <div
        class="user-list surface-100 overflow-y-auto border-right-1 border-300 h-full"
      >
        @if(pageData()){
        <div class="m-2">
          <div class="font-medium text-lg my-3">
            <a
              routerLink="/conversations"
              class="text-primary hover:text-primary-600"
              ><i class="fa-solid fa-arrow-left"></i
            ></a>
            {{ "settings" | translate }}
          </div>

          <div class="text-700 font-medium my-2">
            {{ "whatsapp_settings" | translate }}
          </div>

          <div class="flex flex-column gap-1">
            <button
              pButton
              icon="fa-solid fa-robot"
              [text]="true"
              class="p-button-sm w-full hover:surface-200 justify-content-start"
              [class.surface-200]="activeIndex() === 0"
              (click)="activeIndex.set(0)"
              [label]="'whatsapp_template' | translate"
            ></button>
            <button
              pButton
              icon="fa-brands fa-whatsapp"
              [text]="true"
              class="p-button-sm w-full hover:surface-200 justify-content-start"
              [class.surface-200]="activeIndex() === 1"
              (click)="activeIndex.set(1)"
              [label]="'whatsapp_credentials' | translate"
            ></button>
          </div>

          <div class="text-700 font-medium my-2">
            {{ "users_settings" | translate }}
          </div>

          <div class="flex flex-column gap-1">
            <button
              pButton
              icon="fa-users fas"
              [text]="true"
              class="p-button-sm w-full hover:surface-200 justify-content-start"
              [class.surface-200]="activeIndex() === 2"
              (click)="activeIndex.set(2)"
              [label]="'manage_users' | translate"
            ></button>

            <button
              pButton
              icon="fa-solid fa-building-user"
              [text]="true"
              class="p-button-sm w-full hover:surface-200 justify-content-start"
              [class.surface-200]="activeIndex() === 3"
              (click)="activeIndex.set(3)"
              [label]="'manage_groups' | translate"
            ></button>
          </div>
        </div>

        }@else{
        <div
          class="search-container flex align-items-center justify-content-between m-2 mt-3 px-3 bg-white border-1 border-300 border-round-3xl"
        >
          <i class="fa-solid fa-magnifying-glass"></i>
          <input
            type="text"
            pInputText
            [placeholder]="'search' | translate"
            class="search-input w-full h-full border-0 shadow-none pl-2"
            [(ngModel)]="searchTerm"
          />
        </div>
        <div class="m-2">
          <p-button
            [label]="'all' | translate"
            (click)="getConversationsStatue('all')"
            styleClass="p-2 py-0 text-xs border-round-3xl mr-2"
            [outlined]="conversationsStatue() === 'all'"
          ></p-button>
          <p-button
            [label]="'active' | translate"
            (click)="getConversationsStatue('active')"
            styleClass="p-2 py-0 text-xs border-round-3xl mr-2"
            [outlined]="conversationsStatue() === 'active'"
          ></p-button>
          <p-button
            [label]="'history' | translate"
            (click)="getConversationsStatue('historical')"
            styleClass="p-1 py-0 text-xs border-round-3xl"
            [outlined]="conversationsStatue() === 'historical'"
          ></p-button>
        </div>
        <ul class="list-none p-0 m-0 flex flex-column">
          @if (!usersLoading()) { @for (user of filteredUsers(); track $index) {
          <li
            class="p-2 cursor-pointer user-item hover:surface-200 active:surface-200"
            (click)="selectUser(user)"
            [class.active]="selectedUser()?.id === user.id"
          >
            <div class="flex align-items-center gap-2">
              <div
                class="flex flex-shrink-0 w-2.5rem h-2.5rem border-circle relative"
              >
                <img
                  class="w-full h-full border-circle img-cover"
                  alt="user"
                  [src]="user.featured_image || 'assets/media/profile.png'"
                />
                @if (user?.user_status === 'Online') {
                <span class="status-indicator"></span>
                }
              </div>
              <p
                class="font-semibold m-0 text-overflow-ellipsis overflow-hidden white-space-nowrap text-sm"
              >
                {{ user.sender_name }}
              </p>
              <p
                class="text-xs font-semibold text-400 m-0 ml-auto flex-shrink-0"
              >
                {{ user?.last_message_at | date : "shortTime" }}
              </p>
            </div>
            <div
              class="flex justify-content-between align-items-center mt-2 w-full"
            >
              @if (typingUsers()[user?.id]) {
              <p class="text-sm m-0 text-primary font-medium">typing...</p>
              } @else {
              <p
                class="text-sm font-normal m-0 text-overflow-ellipsis overflow-hidden white-space-nowrap"
              >
                {{ user?.last_message?.message }}
              </p>
              } @if (user?.unread_count > 0) {
              <p
                class="text-white bg-primary text-xs m-0 border-circle flex align-items-center justify-content-center font-semibold flex-shrink-0"
                style="width: 1.3rem; height: 1.3rem"
              >
                {{ user.unread_count }}
              </p>
              }
            </div>
          </li>
          } @empty {
          <p class="m-2 font-semibold">
            {{ "no_users_found" | translate }}
          </p>
          } } @else { @for (i of [1, 2, 3, 4, 5]; track $index) {
          <div class="flex align-items-center gap-2 p-2">
            <p-skeleton shape="circle" size="3rem" class="mr-2" />
            <div class="flex-auto">
              <p-skeleton width="100%" height=".6rem" class="mb-2" />
              <p-skeleton width="50%" height=".6rem" />
            </div>
          </div>
          } }
        </ul>
        }
      </div>
    </div>

    <div
      class="col-12 md:col-9 h-full"
      [class]="!selectedUser() && isSmScreen() ? 'hidden md:flex' : ''"
    >
      @if (selectedUser()) {
      <div class="chat-window flex flex-column relative h-full">
        <div class="chat-header flex align-items-center p-2">
          <button
            pButton
            icon="fa-solid fa-arrow-left"
            class="p-button-text p-button-sm flex md:hidden"
            (click)="this.selectedUser.set(null)"
          ></button>
          <img
            [src]="selectedUser().featured_image || 'assets/media/profile.png'"
            alt="Profile"
            class="w-3rem h-3rem border-circle img-cover relative"
            [class.status-ring]="selectedUser().user_status === 'Online'"
          />
          <div class="flex flex-column ml-3">
            <span class="font-semibold">{{ selectedUser().sender_name }}</span>
            <span
              class="text-sm"
              [ngStyle]="{
                color: selectedUser().user_status === 'Online' ? '#4ade80' : '#9ca3af',
              }"
              >{{ selectedUser().user_status }}</span
            >
          </div>
        </div>

        <div
          #messagesContainer
          class="messages overflow-y-auto p-3 flex-1"
          (scroll)="onScroll()"
        >
          @if (isLoadingMore() && !messagesLoading()) {
          <div class="flex align-items-center justify-content-center">
            <i class="pi pi-spinner pi-spin text-2xl text-primary"></i>
          </div>
          } @if (!messagesLoading()) { @for (item of combinedMessages(); track
          $index) { @if (item.type === 'separator') {
          <div class="text-center">
            <span
              class="surface-100 p-1 m-1 border-round border-1 border-200 text-sm font-medium text-500"
              >{{ item.date }}</span
            >
          </div>
          } @if (item.type === 'message') { @let msg = item.msg;
          <div
            class="message-wrapper"
            [class.self]="msg.direction === 'outbound'"
          >
            <div class="message" [class.optimistic]="msg.is_optimistic">
              @if (msg.type === 'text') {
              <div
                class="message-content text-sm font-medium px-2 py-1 flex justify-content-end gap-2"
              >
                <div class="flex-1 mb-1">
                  @let isLong = msg.message?.length > 500; @let displayed =
                  msg.expanded ? (msg.message | linkify) : ((msg.message |
                  slice:0:500) | linkify); @for (part of displayed; track
                  $index) {
                  <span>
                    @if (part.type === 'text') {
                    <bdi>{{ part.value }}</bdi>
                    } @else if (part.type === 'link') {
                    <a
                      [href]="
                        part.value.includes('@')
                          ? 'mailto:' + part.value
                          : addProtocol(part.value)
                      "
                      [target]="part.value.includes('@') ? '_self' : '_blank'"
                      class="text-primary underline"
                    >
                      {{ part.value }}
                    </a>
                    }
                  </span>
                  } @if (isLong) {
                  <a
                    class="text-sm text-primary hover:text-primary-400"
                    (click)="toggleExpand(msg)"
                  >
                    {{
                      msg.expanded
                        ? ("read_less" | translate)
                        : ("read_more" | translate)
                    }}
                  </a>
                  }
                </div>

                <ng-container
                  *ngTemplateOutlet="
                    messageMeta;
                    context: { $implicit: msg, color: '#737373' }
                  "
                ></ng-container>
              </div>
              } @else if (msg.type === 'image' || msg.type === 'video') {
              <div class="w-full md:w-22rem">
                <div class="relative overflow-hidden h-11rem">
                  @if (msg.type === 'image') {
                  <p-image
                    appendTo="body"
                    [src]="msg.media_data?.url"
                    alt="preview"
                    [preview]="true"
                    class="w-full h-full"
                    imageClass="w-full h-full"
                    [imageStyle]="{ 'object-fit': 'cover' }"
                  ></p-image>
                  } @if (msg.type === 'video') {
                  <video
                    [src]="msg.media_data?.url"
                    controls
                    class="w-full h-full"
                  ></video>
                  }

                  <div
                    class="absolute bottom-0 right-0 text-right px-1 w-full grediant"
                  >
                    <ng-container
                      *ngTemplateOutlet="
                        messageMeta;
                        context: { $implicit: msg, color: '#f5f5f5' }
                      "
                    ></ng-container>
                  </div>
                </div>

                @if (msg.media_data?.caption) {
                <p class="m-0 p-2 line-height-2 text-sm font-medium">
                  {{ msg.media_data?.caption }}
                </p>
                }
              </div>
              } @else if(msg.type === 'document') {
              <div class="document-message p-2 pb-0 w-full md:w-22rem">
                <div
                  class="flex align-items-center gap-2 cursor-pointer"
                  (click)="openPdfViewer(msg)"
                >
                  <i class="fa-solid fa-file-pdf text-red-500 text-3xl"></i>
                  <div class="flex-1">
                    <p class="m-0 font-semibold text-sm">
                      {{ msg.media_data?.fileName || "Document.pdf" }}
                    </p>
                    <p class="m-0 text-xs">
                      {{ msg.media_data?.fileSize || "PDF" }}
                    </p>
                  </div>
                  <i
                    class="fa-solid fa-download text-primary hover:text-primary-400"
                  ></i>
                </div>

                @if (msg.media_data?.caption) {
                <p
                  class="m-0 mt-2 text-sm font-medium line-height-2 border-top-1 border-300 pt-2"
                >
                  {{ msg.media_data?.caption }}
                </p>
                }

                <div class="flex justify-content-end">
                  <ng-container
                    *ngTemplateOutlet="
                      messageMeta;
                      context: { $implicit: msg, color: '#737373' }
                    "
                  ></ng-container>
                </div>
              </div>
              }@else if(msg.type === 'audio'){
              <div class="w-full md:w-22rem px-2">
                <audio
                  #audioPlayer
                  id="audio"
                  [src]="msg.media_data?.url"
                  controls
                  class="w-full"
                  (play)="onAudioPlay(audioPlayer)"
                ></audio>
                <div class="flex justify-content-end -mt-3">
                  <ng-container
                    *ngTemplateOutlet="
                      messageMeta;
                      context: { $implicit: msg, color: '#737373' }
                    "
                  ></ng-container>
                </div>
              </div>
              }
            </div>
          </div>
          } } } @else {
          <div class="flex align-items-center justify-content-center h-full">
            <i class="pi pi-spinner pi-spin text-2xl text-primary"></i>
          </div>
          } @if (typingUsers()[selectedUser()?.id]) {
          <div class="message-wrapper">
            <div class="message typing-indicator">
              <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
          }
        </div>

        <div
          class="flex flex-column align-items-center p-3 border-top-1 border-300 mt-auto"
        >
          @if (fileUploaderVisible()) {
          <p-fileUpload
            #fileUploader
            [accept]="mediaType()"
            [multiple]="true"
            [auto]="true"
            [customUpload]="true"
            (uploadHandler)="onUploadFiles($event)"
            [showUploadButton]="false"
            [showCancelButton]="false"
            (onClear)="fileUploaderVisible.set(false)"
            [style]="{ display: 'none' }"
          />
          }
          <textarea
            #messageInput
            pTextarea
            [(ngModel)]="newMessage"
            (keydown)="onEnterPress($event)"
            (input)="sendTypingEvent()"
            [placeholder]="
              (isChatExpired() ? 'conversation_expired_24h' : 'type_a_message')
                | translate
            "
            [autoResize]="false"
            [disabled]="isChatExpired()"
            class="w-full border-0 shadow-none p-0 overflow-hidden max-h-15rem"
            rows="1"
          ></textarea>
          <div
            class="w-full flex align-content-center justify-content-between text-500 relative"
          >
            <div class="flex align-items-center">
              <div class="relative">
                <p-button
                  (click)="toggleEmojiPicker()"
                  [text]="true"
                  [pTooltip]="'emoji' | translate"
                  tooltipPosition="top"
                  icon="fa-solid fa-face-smile"
                />
                @if (showEmojiPicker()) {
                <emoji-mart
                  title="Pick your emojiâ€¦"
                  (emojiSelect)="addEmoji($event)"
                  [style]="{
                    position: 'absolute',
                    bottom: '40px',
                    left: '0',
                    'z-index': 1000
                  }"
                ></emoji-mart>
                }
              </div>

              <p-menu
                #attachmenMenu
                appendTo="body"
                [model]="attachmentItems()"
                [popup]="true"
              />
              <p-button
                (click)="attachmenMenu.toggle($event)"
                [text]="true"
                [pTooltip]="'attachments' | translate"
                tooltipPosition="top"
                icon="fa-solid fa-link"
              />
              @if(!isChatExpired()){
              <p-button
                (click)="closeChat()"
                [text]="true"
                [pTooltip]="'end_conversation' | translate"
                tooltipPosition="top"
                icon="fa-solid fa-lock"
              />}
            </div>
            @if(newMessage()){
            <p-button
              icon="fa-solid fa-paper-plane"
              aria-label="Send"
              (onClick)="sendMessage()"
            />
            }@else {
            <app-voice-recorder
              (audioBlob)="onVoiceRecordingComplete($event)"
              [recordingCancelled]="activeVoiceRecording()"
            />
            }
          </div>
        </div>
        @if (showScrollButton()) {
        <button
          pButton
          icon="fa-solid fa-angles-down"
          (click)="scrollToBottom()"
          class="scroll-bottom-btn p-button-rounded"
        ></button>
        }
      </div>
      } @else if (this.pageData()) { @if(activeIndex()!==null){
      <div class="h-full surface-100 p-2">
        @if (activeIndex() === 0) { @defer (when activeIndex() === 0) {
        <app-chat-flow />
        } } @if (activeIndex() === 1) { @defer (when activeIndex() === 1) {
        <app-setting-cu [(settings)]="settings" />
        } } @if (activeIndex() === 2) { @defer (when activeIndex() === 2) {
        <app-users />
        } } @if (activeIndex() === 3) { @defer (when activeIndex() === 3) {
        <app-groups />
        } }
      </div>
      }@else{
      <div
        class="surface-50 flex flex-column align-items-center justify-content-center gap-2 h-full p-5"
      >
        <iframe
          src="https://lottie.host/embed/085db403-ff48-4662-ae6c-75d48235af88/WgrDOFb4cY.lottie"
          style="border: 0"
        ></iframe>
        <h4 class="text-600 text-xl font-medium m-0">
          {{ "settings" | translate }}
        </h4>
      </div>
      } } @else {
      <div
        class="surface-50 flex flex-column align-items-center justify-content-center gap-2 h-full p-5"
      >
        <iframe
          src="https://lottie.host/embed/ea3a541c-f8c3-482c-8be4-ec92a2b84b0f/4Fk6wpCisr.lottie "
          style="border: 0"
        ></iframe>
        <h4 class="text-600 text-xl font-medium m-0">
          {{ "start_a_conversation" | translate }}
        </h4>
        <p class="text-700 text-sm m-0">
          {{ "select_a_contact_to_start_messaging" | translate }}
        </p>
      </div>
      }
    </div>
  </div>
</div>

<p-dialog
  [header]="'preview_files' | translate"
  [(visible)]="showPreviewModal"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '40rem', 'max-width': '90vw' }"
  [draggable]="false"
  [resizable]="false"
  [closeOnEscape]="true"
  (keydown.enter)="sendPreviewFiles()"
  (onHide)="fileUploader()?.clear(); previewFiles.set([])"
>
  @if (previewFiles().length) {
  <div class="flex flex-column gap-3">
    <div>
      @let main = previewFiles()[selectedPreviewIndex()]; @if
      (main.file.type.startsWith('video/')) {
      <video
        [src]="main.url"
        controls
        class="w-full border-round-lg h-15rem img-cover"
      ></video>
      } @else if (main.file.type.startsWith('image/')){
      <img
        [src]="main.url"
        alt="preview"
        class="w-full border-round-lg h-15rem img-cover"
      />
      }@else {
      <div
        class="p-3 flex flex-column gap-3 align-items-center justify-content-center bg-gray-100 border-round-lg"
      >
        <span class="font-medium">{{ main.file.name }}</span>
        <i class="fa-solid fa-file-pdf text-red-500 text-3xl"></i>
        <span class="text-sm text-500">
          {{ formatFileSize(main.file.size) }}
        </span>
      </div>
      }

      <input
        type="text"
        pInputText
        class="w-full mt-2"
        [(ngModel)]="main.caption"
        placeholder="Add caption..."
      />
    </div>

    @if (previewFiles().length) {
    <div class="flex gap-2 py-1 overflow-y-auto">
      @for (item of previewFiles(); track $index) {
      <div
        class="preview-file relative flex-none w-4rem h-4rem border-round-lg overflow-hidden cursor-pointer border-1 border-primary-300"
        [class]="
          $index === selectedPreviewIndex() ? 'border-2 border-primary' : ''
        "
        (click)="setActivePreview($index)"
      >
        @if (item.file.type.startsWith('video/')) {
        <video [src]="item.url" class="w-full h-full img-cover"></video>
        } @else if (item.file.type.startsWith('image/')) {
        <img [src]="item.url" class="w-full h-full img-cover" alt="thumb" />
        } @else {
        <div
          class="w-full h-full flex align-items-center justify-content-center"
        >
          <i class="fa-solid fa-file-pdf text-2xl text-red-500"></i>
        </div>
        }

        <button
          type="button"
          pButton
          icon="fa-solid fa-xmark text-xs"
          class="remove-btn absolute top-0 right-0 bg-transparent text-white w-1rem h-1rem border-none flex align-items-center justify-content-center border-circle"
          (click)="removePreviewFile($event, $index)"
        ></button>
      </div>
      }
      <p-button
        icon="fa-solid fa-plus"
        (onClick)="triggerFileUpload(mediaType())"
        [outlined]="true"
        styleClass="w-4rem h-4rem border-2 border-primary"
      />
    </div>
    }

    <div class="flex justify-content-end gap-2 mt-3">
      <p-button
        label="Cancel"
        styleClass="p-button-text"
        (click)="showPreviewModal.set(false); previewFiles.set([])"
      ></p-button>
      <p-button
        label="Send"
        icon="fa-solid fa-paper-plane"
        (click)="sendPreviewFiles()"
      ></p-button>
    </div>
  </div>
  }
</p-dialog>

<ng-template #messageMeta let-msg let-color="color">
  <div class="mt-auto">
    <small [style.color]="color">
      {{ msg.created_at | date : "shortTime" }}
    </small>

    @if (msg.from === currentUser()?.whatsapp_number) { @if
    (msg.status==="delivered") {
    <svg
      viewBox="0 0 16 11"
      height="12"
      width="17"
      preserveAspectRatio="xMidYMid meet"
      [attr.fill]="color"
    >
      <path
        d="M11.0714 0.652832C10.991 0.585124 10.8894 0.55127 10.7667 0.55127C10.6186 0.55127 10.4916 0.610514 10.3858 0.729004L4.19688 8.36523L1.79112 6.09277C1.7488 6.04622 1.69802 6.01025 1.63877 5.98486C1.57953 5.95947 1.51817 5.94678 1.45469 5.94678C1.32351 5.94678 1.20925 5.99544 1.11192 6.09277L0.800883 6.40381C0.707784 6.49268 0.661235 6.60482 0.661235 6.74023C0.661235 6.87565 0.707784 6.98991 0.800883 7.08301L3.79698 10.0791C3.94509 10.2145 4.11224 10.2822 4.29844 10.2822C4.40424 10.2822 4.5058 10.259 4.60313 10.2124C4.70046 10.1659 4.78086 10.1003 4.84434 10.0156L11.4903 1.59863C11.5623 1.5013 11.5982 1.40186 11.5982 1.30029C11.5982 1.14372 11.5348 1.01888 11.4078 0.925781L11.0714 0.652832ZM8.6212 8.32715C8.43077 8.20866 8.2488 8.09017 8.0753 7.97168C7.99489 7.89128 7.8891 7.85107 7.75791 7.85107C7.6098 7.85107 7.4892 7.90397 7.3961 8.00977L7.10411 8.33984C7.01947 8.43717 6.97715 8.54508 6.97715 8.66357C6.97715 8.79476 7.0237 8.90902 7.1168 9.00635L8.1959 10.0791C8.33132 10.2145 8.49636 10.2822 8.69102 10.2822C8.79681 10.2822 8.89838 10.259 8.99571 10.2124C9.09304 10.1659 9.17556 10.1003 9.24327 10.0156L15.8639 1.62402C15.9358 1.53939 15.9718 1.43994 15.9718 1.32568C15.9718 1.1818 15.9125 1.05697 15.794 0.951172L15.4386 0.678223C15.3582 0.610514 15.2587 0.57666 15.1402 0.57666C14.9964 0.57666 14.8715 0.635905 14.7657 0.754395L8.6212 8.32715Z"
      ></path>
    </svg>
    } @else if (msg.status==="read") {
    <svg
      viewBox="0 0 16 11"
      height="11"
      width="16"
      preserveAspectRatio="xMidYMid meet"
      fill="#2F54A3"
    >
      <path
        d="M11.0714 0.652832C10.991 0.585124 10.8894 0.55127 10.7667 0.55127C10.6186 0.55127 10.4916 0.610514 10.3858 0.729004L4.19688 8.36523L1.79112 6.09277C1.7488 6.04622 1.69802 6.01025 1.63877 5.98486C1.57953 5.95947 1.51817 5.94678 1.45469 5.94678C1.32351 5.94678 1.20925 5.99544 1.11192 6.09277L0.800883 6.40381C0.707784 6.49268 0.661235 6.60482 0.661235 6.74023C0.661235 6.87565 0.707784 6.98991 0.800883 7.08301L3.79698 10.0791C3.94509 10.2145 4.11224 10.2822 4.29844 10.2822C4.40424 10.2822 4.5058 10.259 4.60313 10.2124C4.70046 10.1659 4.78086 10.1003 4.84434 10.0156L11.4903 1.59863C11.5623 1.5013 11.5982 1.40186 11.5982 1.30029C11.5982 1.14372 11.5348 1.01888 11.4078 0.925781L11.0714 0.652832ZM8.6212 8.32715C8.43077 8.20866 8.2488 8.09017 8.0753 7.97168C7.99489 7.89128 7.8891 7.85107 7.75791 7.85107C7.6098 7.85107 7.4892 7.90397 7.3961 8.00977L7.10411 8.33984C7.01947 8.43717 6.97715 8.54508 6.97715 8.66357C6.97715 8.79476 7.0237 8.90902 7.1168 9.00635L8.1959 10.0791C8.33132 10.2145 8.49636 10.2822 8.69102 10.2822C8.79681 10.2822 8.89838 10.259 8.99571 10.2124C9.09304 10.1659 9.17556 10.1003 9.24327 10.0156L15.8639 1.62402C15.9358 1.53939 15.9718 1.43994 15.9718 1.32568C15.9718 1.1818 15.9125 1.05697 15.794 0.951172L15.4386 0.678223C15.3582 0.610514 15.2587 0.57666 15.1402 0.57666C14.9964 0.57666 14.8715 0.635905 14.7657 0.754395L8.6212 8.32715Z"
      ></path>
    </svg>
    } @else if (msg.status==="sent"){
    <svg
      viewBox="0 0 12 11"
      height="12"
      width="17"
      preserveAspectRatio="xMidYMid meet"
      [attr.fill]="color"
    >
      <path
        d="M11.1549 0.652832C11.0745 0.585124 10.9729 0.55127 10.8502 0.55127C10.7021 0.55127 10.5751 0.610514 10.4693 0.729004L4.28038 8.36523L1.87461 6.09277C1.8323 6.04622 1.78151 6.01025 1.72227 5.98486C1.66303 5.95947 1.60166 5.94678 1.53819 5.94678C1.407 5.94678 1.29275 5.99544 1.19541 6.09277L0.884379 6.40381C0.79128 6.49268 0.744731 6.60482 0.744731 6.74023C0.744731 6.87565 0.79128 6.98991 0.884379 7.08301L3.88047 10.0791C4.02859 10.2145 4.19574 10.2822 4.38194 10.2822C4.48773 10.2822 4.58929 10.259 4.68663 10.2124C4.78396 10.1659 4.86436 10.1003 4.92784 10.0156L11.5738 1.59863C11.6458 1.5013 11.6817 1.40186 11.6817 1.30029C11.6817 1.14372 11.6183 1.01888 11.4913 0.925781L11.1549 0.652832Z"
      ></path>
    </svg>
    }@else{
    <svg
      viewBox="0 0 12 13"
      height="12"
      width="13"
      preserveAspectRatio="xMidYMid meet"
      class=""
      version="1.1"
      x="0px"
      y="0px"
      enable-background="new 0 0 12 11"
      [attr.fill]="color"
    >
      <path
        d="M9.75,7.713H8.244V5.359c0-0.276-0.224-0.5-0.5-0.5H7.65c-0.276,0-0.5,0.224-0.5,0.5v2.947 c0,0.276,0.224,0.5,0.5,0.5h0.094c0.001,0,0.002-0.001,0.003-0.001S7.749,8.807,7.75,8.807h2c0.276,0,0.5-0.224,0.5-0.5V8.213 C10.25,7.937,10.026,7.713,9.75,7.713z M9.75,2.45h-3.5c-1.82,0-3.3,1.48-3.3,3.3v3.5c0,1.82,1.48,3.3,3.3,3.3h3.5 c1.82,0,3.3-1.48,3.3-3.3v-3.5C13.05,3.93,11.57,2.45,9.75,2.45z M11.75,9.25c0,1.105-0.895,2-2,2h-3.5c-1.104,0-2-0.895-2-2v-3.5 c0-1.104,0.896-2,2-2h3.5c1.105,0,2,0.896,2,2V9.25z"
      ></path>
    </svg>
    } }
  </div>
</ng-template>
